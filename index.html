<!DOCTYPE html> 
<html lang="en"> 
    <head> 
        <meta charset="UTF-8"> 
        <title>Library of QR Grids</title>         
        <style>body { background: #0d0d0d; color: #e0e0e0; font-family: Arial; padding: 20px; } h1 { color: #7df27d; } button { padding: 8px 14px; margin: 6px; background: #222; color: #7df27d; border: 1px solid #7df27d; cursor: pointer; border-radius: 6px; } button:hover { background: #333; } input, textarea, select { padding: 6px; margin: 5px; background: #111; color: #7df27d; border: 1px solid #555; border-radius: 4px; } textarea { width: 100%; height: 80px; } .section { margin-top: 30px; padding: 15px; border: 1px solid #333; border-radius: 10px; } canvas { margin-top: 15px; }</style>         
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>         
        <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>         
    </head>     
    <body> 
        <h1>The Library of&nbsp;QR Grids</h1> 
        <div class="section"> 
            <h2><b>Find QR code from Text</b></h2> 
            <textarea id="textInput" placeholder="Enter text..."></textarea>
            <br> 
            <button onclick="textToQR()">Find</button>
            <br> 
            <canvas id="qrFromText"></canvas>             
            <div id="locationFromText"></div>             
        </div>         
        <div class="section"> 
            <h2>2. Find location from QR code</h2> 
            <input type="file" accept="image/*" onchange="qrToText(event)">
            <br> 
            <div id="decodedText"></div>             
            <div id="decodedLocation"></div>             
        </div>         
        <div class="section"> 
            <h2>Find QR code from Location</h2> 
            <input type="text" id="locationInput" placeholder="Enter location number">
            <br> 
            <button onclick="locationToQR()">Find</button>
            <br> 
            <canvas id="qrFromLocation"></canvas>             
            <div id="textFromLocation"></div>             
        </div>         
        <script>
// Reversible encoding: text â†” big integer location
function textToLocation(text){
    let loc = '';
    for(let i=0;i<text.length;i++){
        const code = text.charCodeAt(i).toString(16).padStart(4,'0');
        loc += code;
    }
    return loc; // hexadecimal string as location
}

function locationToText(loc){
    let text = '';
    for(let i=0;i<loc.length;i+=4){
        const code = parseInt(loc.slice(i,i+4),16);
        text += String.fromCharCode(code);
    }
    return text;
}

function textToQR(){
    const text = document.getElementById('textInput').value;
    if(!text) return alert('Enter some text');
    const location = textToLocation(text);
    new QRious({element:document.getElementById('qrFromText'), value:text, size:300, level:'M'});
    document.getElementById('locationFromText').innerHTML = `Location: ${location}`;
}

function qrToText(event){
    const file = event.target.files[0];
    const reader = new FileReader();
    reader.onload = function(e){
        const img = new Image();
        img.onload = function(){
            const c = document.createElement('canvas');
            c.width = img.width; c.height = img.height;
            const ctx = c.getContext('2d');
            ctx.drawImage(img,0,0);
            const imgData = ctx.getImageData(0,0,c.width,c.height);
            const code = jsQR(imgData.data, c.width, c.height);
            if(code){
                const text = code.data;
                const location = textToLocation(text);
                document.getElementById('decodedText').innerHTML = `Text: ${text}`;
                document.getElementById('decodedLocation').innerHTML = `Location: ${location}`;
            } else {
                document.getElementById('decodedText').innerHTML = 'No QR code detected';
                document.getElementById('decodedLocation').innerHTML = '';
            }
        };
        img.src = e.target.result;
    };
    reader.readAsDataURL(file);
}

function locationToQR(){
    const loc = document.getElementById('locationInput').value;
    if(!loc) return alert('Enter a location');
    try{
        const text = locationToText(loc);
        new QRious({element:document.getElementById('qrFromLocation'), value:text, size:300, level:'M'});
        document.getElementById('textFromLocation').innerHTML = `Text: ${text}`;
    } catch(e){
        alert('Invalid location');
        document.getElementById('textFromLocation').innerHTML='';
    }
}
</script>         
    </body>     
</html>
